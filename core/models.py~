from django.db import models
from django.core.validators import MinValueValidator, MaxValueValidator

import encrypted_fields


class TestModel(models.Model):
    test_field = encrypted_fields.EncryptedIntegerField(
        blank=True, null=True,
        validators=[MinValueValidator(10000), MaxValueValidator(10000000)]
    )

    def save(self, force_insert=False, force_update=False, using=None,
             update_fields=None):
        self.full_clean()
        return super(TestModel, self).save(force_insert=force_insert, force_update=force_update,
                                       using=using, update_fields=update_fields)

